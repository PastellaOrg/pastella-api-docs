openapi: 3.0.0
info:
  title: Pastella Wallet API
  version: 1.0.0
  description: |
    Complete REST API documentation for the Pastella cryptocurrency wallet.

    ## Base URL
    Default API port: `21002`

    ## Authentication
    All requests require an API key header:
    ```
    X-API-KEY: your_rpc_password
    ```

    ## Transaction Types
    - **TRANSFER**: Regular transfer transaction
    - **STAKING**: Staking transaction

    ## Balance Types
    - **unlocked**: Spendable balance (confirmed)
    - **locked**: Unconfirmed/locked balance

    ## Address Format
    Pastella addresses start with `PAS1` prefix.

  contact:
    name: Pastella Development Team
  license:
    name: MIT

servers:
  - url: http://localhost:21002
    description: Local development server

tags:
  - name: Wallet
    description: Wallet management operations
  - name: Addresses
    description: Address creation and management
  - name: Keys
    description: Private keys and mnemonic seeds
  - name: Balance
    description: Balance queries
  - name: Transactions
    description: Transaction creation and queries
  - name: Node
    description: Node connection management
  - name: Status
    description: Wallet and network status

paths:
  ################################################################################
  # WALLET MANAGEMENT
  ################################################################################

  /wallet/open:
    post:
      tags:
        - Wallet
      summary: Open an existing wallet
      description: |
        Opens an existing wallet file and connects to the daemon.
      operationId: openWallet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - filename
                - password
              properties:
                filename:
                  type: string
                  description: Path to wallet file
                  example: "/path/to/wallet.wallet"
                password:
                  type: string
                  description: Wallet password
                  example: "secure_password"
                daemonHost:
                  type: string
                  description: Daemon host address
                  default: "127.0.0.1"
                daemonPort:
                  type: integer
                  description: Daemon RPC port
                  default: 21001
                daemonSSL:
                  type: boolean
                  description: Use SSL for daemon connection
                  default: false
            example:
              filename: "/path/to/wallet.wallet"
              password: "secure_password"
              daemonHost: "127.0.0.1"
              daemonPort: 21001
      responses:
        '200':
          description: Wallet opened successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
                  message:
                    type: string
                    example: "Wallet opened successfully"
        '401':
          description: Invalid password
        '404':
          description: Wallet file not found
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/wallet/open \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "filename": "/path/to/wallet.wallet",
                "password": "secure_password",
                "daemonHost": "127.0.0.1",
                "daemonPort": 21001
              }'

  /wallet/import/key:
    post:
      tags:
        - Wallet
      summary: Import wallet from private key
      description: |
        Imports a wallet using a private spend key.
      operationId: importWalletKey
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - privateKey
                - filename
                - password
              properties:
                privateKey:
                  type: string
                  description: Private spend key (hex format)
                  example: "abc123..."
                filename:
                  type: string
                  description: Path for new wallet file
                  example: "/path/to/imported.wallet"
                password:
                  type: string
                  description: Wallet password
                  example: "secure_password"
                scanHeight:
                  type: integer
                  description: Block height to start scanning from
                  default: 0
                  example: 100000
                daemonHost:
                  type: string
                  default: "127.0.0.1"
                daemonPort:
                  type: integer
                  default: 21001
            example:
              privateKey: "abc123..."
              filename: "/path/to/imported.wallet"
              password: "secure_password"
              scanHeight: 100000
      responses:
        '200':
          description: Wallet imported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
                  address:
                    type: string
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/wallet/import/key \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "privateKey": "abc123...",
                "filename": "/path/to/imported.wallet",
                "password": "secure_password",
                "scanHeight": 100000
              }'

  /wallet/import/seed:
    post:
      tags:
        - Wallet
      summary: Import wallet from mnemonic seed
      description: |
        Imports a wallet using a mnemonic seed phrase.
      operationId: importWalletSeed
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - mnemonicSeed
                - filename
                - password
              properties:
                mnemonicSeed:
                  type: string
                  description: Mnemonic seed phrase (space-separated words)
                  example: "words list here mnemonic seed"
                filename:
                  type: string
                  example: "/path/to/imported.wallet"
                password:
                  type: string
                  example: "secure_password"
                scanHeight:
                  type: integer
                  description: Block height to start scanning from
                  default: 0
                daemonHost:
                  type: string
                  default: "127.0.0.1"
                daemonPort:
                  type: integer
                  default: 21001
            example:
              mnemonicSeed: "words list here mnemonic seed"
              filename: "/path/to/imported.wallet"
              password: "secure_password"
              scanHeight: 100000
      responses:
        '200':
          description: Wallet imported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
                  address:
                    type: string
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/wallet/import/seed \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "mnemonicSeed": "words list here mnemonic seed",
                "filename": "/path/to/imported.wallet",
                "password": "secure_password",
                "scanHeight": 100000
              }'

  /wallet/create:
    post:
      tags:
        - Wallet
      summary: Create a new wallet
      description: |
        Creates a new wallet with a randomly generated seed.
      operationId: createWallet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - filename
                - password
              properties:
                filename:
                  type: string
                  description: Path for new wallet file
                  example: "/path/to/new.wallet"
                password:
                  type: string
                  description: Wallet password
                  example: "secure_password"
                daemonHost:
                  type: string
                  default: "127.0.0.1"
                daemonPort:
                  type: integer
                  default: 21001
            example:
              filename: "/path/to/new.wallet"
              password: "secure_password"
      responses:
        '200':
          description: Wallet created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
                  address:
                    type: string
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                  mnemonicSeed:
                    type: string
                    example: "words list here mnemonic seed"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/wallet/create \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "filename": "/path/to/new.wallet",
                "password": "secure_password"
              }'

  /wallet:
    delete:
      tags:
        - Wallet
      summary: Close the current wallet
      description: |
        Closes the currently open wallet.
      operationId: closeWallet
      responses:
        '200':
          description: Wallet closed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X DELETE http://localhost:21002/wallet \
              -H "X-API-KEY: your_rpc_password"

  /save:
    put:
      tags:
        - Wallet
      summary: Save the wallet
      description: |
        Saves the current wallet state to disk.
      operationId: saveWallet
      responses:
        '200':
          description: Wallet saved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X PUT http://localhost:21002/save \
              -H "X-API-KEY: your_rpc_password"

  /reset:
    put:
      tags:
        - Wallet
      summary: Reset wallet
      description: |
        Resets wallet scanning from a specific height.
      operationId: resetWallet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - scanHeight
              properties:
                scanHeight:
                  type: integer
                  description: Block height to start scanning from
                  example: 100000
            example:
              scanHeight: 100000
      responses:
        '200':
          description: Wallet reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X PUT http://localhost:21002/reset \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{"scanHeight": 100000}'

  ################################################################################
  # ADDRESS MANAGEMENT
  ################################################################################

  /addresses/create:
    post:
      tags:
        - Addresses
      summary: Create a new address
      description: |
        Creates a new random address in the wallet.
      operationId: createAddress
      responses:
        '200':
          description: Address created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  address:
                    type: string
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                  privateKey:
                    type: string
                    description: Private spend key (hex)
                    example: "abc123..."
                  publicKey:
                    type: string
                    description: Public spend key (hex)
                    example: "def456..."
                  walletIndex:
                    type: integer
                    description: Wallet index for deterministic generation
                    example: 1
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/addresses/create \
              -H "X-API-KEY: your_rpc_password"

  /addresses/import:
    post:
      tags:
        - Addresses
      summary: Import an address with private key
      description: |
        Imports an address using a private spend key.
      operationId: importAddress
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - privateKey
              properties:
                privateKey:
                  type: string
                  description: Private spend key (hex)
                  example: "abc123..."
                scanHeight:
                  type: integer
                  description: Block height to start scanning from
                  default: 0
                  example: 100000
            example:
              privateKey: "abc123..."
              scanHeight: 100000
      responses:
        '200':
          description: Address imported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  address:
                    type: string
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                  privateKey:
                    type: string
                    example: "abc123..."
                  publicKey:
                    type: string
                    example: "def456..."
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/addresses/import \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "privateKey": "abc123...",
                "scanHeight": 100000
              }'

  /addresses/import/deterministic:
    post:
      tags:
        - Addresses
      summary: Import deterministic address
      description: |
        Imports an address using deterministic wallet index.
      operationId: importDeterministicAddress
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - walletIndex
              properties:
                walletIndex:
                  type: integer
                  description: Wallet index for deterministic generation
                  example: 5
                scanHeight:
                  type: integer
                  description: Block height to start scanning from
                  default: 0
                  example: 100000
            example:
              walletIndex: 5
              scanHeight: 100000
      responses:
        '200':
          description: Address imported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  address:
                    type: string
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                  privateKey:
                    type: string
                    example: "abc123..."
                  publicKey:
                    type: string
                    example: "def456..."
                  walletIndex:
                    type: integer
                    example: 5
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/addresses/import/deterministic \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "walletIndex": 5,
                "scanHeight": 100000
              }'

  /addresses/validate:
    post:
      tags:
        - Addresses
      summary: Validate an address
      description: |
        Validates a Pastella address format.
      operationId: validateAddress
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - address
              properties:
                address:
                  type: string
                  description: Address to validate
                  example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
            example:
              address: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  isIntegrated:
                    type: boolean
                    description: Whether address is integrated address
                    example: false
                  actualAddress:
                    type: string
                    description: The actual address (for integrated addresses)
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                  publicKey:
                    type: string
                    description: Public spend key
                    example: "def456..."
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/addresses/validate \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "address": "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
              }'

  /addresses:
    get:
      tags:
        - Addresses
      summary: Get all addresses
      description: |
        Returns all addresses in the wallet.
      operationId: getAddresses
      responses:
        '200':
          description: List of addresses
          content:
            application/json:
              schema:
                type: object
                properties:
                  addresses:
                    type: array
                    items:
                      type: string
                    example: ["PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa", "PAS1abc..."]
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/addresses \
              -H "X-API-KEY: your_rpc_password"

  /addresses/primary:
    get:
      tags:
        - Addresses
      summary: Get primary address
      description: |
        Returns the primary wallet address.
      operationId: getPrimaryAddress
      responses:
        '200':
          description: Primary address
          content:
            application/json:
              schema:
                type: object
                properties:
                  address:
                    type: string
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/addresses/primary \
              -H "X-API-KEY: your_rpc_password"

  /addresses/{address}:
    delete:
      tags:
        - Addresses
      summary: Delete an address
      description: |
        Deletes an address from the wallet.
      operationId: deleteAddress
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
          description: Address to delete
          example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      responses:
        '200':
          description: Address deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X DELETE "http://localhost:21002/addresses/PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa" \
              -H "X-API-KEY: your_rpc_password"

  ################################################################################
  # KEYS & SEEDS
  ################################################################################

  /keys/{address}:
    get:
      tags:
        - Keys
      summary: Get keys for address
      description: |
        Returns the public and private keys for an address.
      operationId: getKeys
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
          description: Address to get keys for
          example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      responses:
        '200':
          description: Keys for address
          content:
            application/json:
              schema:
                type: object
                properties:
                  publicKey:
                    type: string
                    description: Public spend key (hex)
                    example: "def456..."
                  privateKey:
                    type: string
                    description: Private spend key (hex)
                    example: "abc123..."
                  walletIndex:
                    type: integer
                    example: 0
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/keys/PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa" \
              -H "X-API-KEY: your_rpc_password"

  /keys/mnemonic/{address}:
    get:
      tags:
        - Keys
      summary: Get mnemonic seed for address
      description: |
        Returns the mnemonic seed phrase for an address.
      operationId: getMnemonicSeed
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
          description: Address to get mnemonic for
          example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      responses:
        '200':
          description: Mnemonic seed
          content:
            application/json:
              schema:
                type: object
                properties:
                  mnemonicSeed:
                    type: string
                    description: Mnemonic seed phrase (space-separated words)
                    example: "words list here mnemonic seed"
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/keys/mnemonic/PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa" \
              -H "X-API-KEY: your_rpc_password"

  ################################################################################
  # BALANCE
  ################################################################################

  /balance:
    get:
      tags:
        - Balance
      summary: Get total wallet balance
      description: |
        Returns the total balance for all addresses in the wallet.
      operationId: getBalance
      responses:
        '200':
          description: Wallet balance
          content:
            application/json:
              schema:
                type: object
                properties:
                  unlocked:
                    type: integer
                    description: Unlocked/spendable balance (atomic units)
                    example: 1000000
                  locked:
                    type: integer
                    description: Locked/unconfirmed balance (atomic units)
                    example: 50000
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/balance \
              -H "X-API-KEY: your_rpc_password"

  /balance/{address}:
    get:
      tags:
        - Balance
      summary: Get balance for specific address
      description: |
        Returns the balance for a specific address.
      operationId: getBalanceAddress
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
          description: Address to get balance for
          example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      responses:
        '200':
          description: Address balance
          content:
            application/json:
              schema:
                type: object
                properties:
                  unlocked:
                    type: integer
                    example: 500000
                  locked:
                    type: integer
                    example: 0
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/balance/PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa" \
              -H "X-API-KEY: your_rpc_password"

  /balances:
    get:
      tags:
        - Balance
      summary: Get balances for all addresses
      description: |
        Returns the balance for each address in the wallet.
      operationId: getBalances
      responses:
        '200':
          description: List of address balances
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    address:
                      type: string
                      example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                    unlocked:
                      type: integer
                      example: 500000
                    locked:
                      type: integer
                      example: 0
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/balances \
              -H "X-API-KEY: your_rpc_password"

  ################################################################################
  # TRANSACTIONS
  ################################################################################

  /transactions/send/basic:
    post:
      tags:
        - Transactions
      summary: Send a simple transaction
      description: |
        Sends a transaction to a single destination.
      operationId: sendBasicTransaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - destination
                - amount
              properties:
                destination:
                  type: string
                  description: Recipient address
                  example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                amount:
                  type: integer
                  description: Amount to send (atomic units)
                  example: 1000000
                paymentId:
                  type: string
                  description: Optional payment ID (hex)
                  example: "abc123..."
            example:
              destination: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
              amount: 1000000
      responses:
        '200':
          description: Transaction sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactionHash:
                    type: string
                    description: Transaction hash
                    example: "abc123..."
                  fee:
                    type: integer
                    description: Transaction fee paid (atomic units)
                    example: 100
                  relayedToNetwork:
                    type: boolean
                    description: Whether transaction was relayed to network
                    example: true
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/transactions/send/basic \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "destination": "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa",
                "amount": 1000000
              }'

  /transactions/prepare/basic:
    post:
      tags:
        - Transactions
      summary: Prepare a simple transaction
      description: |
        Creates a transaction without sending it to the network.
        Use /transactions/send/prepared to send it later.
      operationId: prepareBasicTransaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - destination
                - amount
              properties:
                destination:
                  type: string
                amount:
                  type: integer
                paymentId:
                  type: string
            example:
              destination: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
              amount: 1000000
      responses:
        '200':
          description: Transaction prepared successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactionHash:
                    type: string
                    example: "abc123..."
                  fee:
                    type: integer
                    example: 100
                  relayedToNetwork:
                    type: boolean
                    example: false
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/transactions/prepare/basic \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "destination": "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa",
                "amount": 1000000
              }'

  /transactions/send/advanced:
    post:
      tags:
        - Transactions
      summary: Send an advanced transaction
      description: |
        Sends a transaction with multiple destinations and advanced options.
      operationId: sendAdvancedTransaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - destinations
              properties:
                destinations:
                  type: array
                  description: List of destinations
                  items:
                    type: object
                    required:
                      - address
                      - amount
                    properties:
                      address:
                        type: string
                        example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                      amount:
                        type: integer
                        example: 500000
                  example:
                    - address: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                      amount: 500000
                    - address: "PAS1abc..."
                      amount: 500000
                fee:
                  type: integer
                  description: Fixed transaction fee (atomic units)
                  example: 100
                sourceAddresses:
                  type: array
                  description: Addresses to send from (uses all if not specified)
                  items:
                    type: string
                  example: ["PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"]
                changeAddress:
                  type: string
                  description: Custom change address
                  example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                unlockTime:
                  type: integer
                  description: Unix timestamp or block height when funds unlock
                  default: 0
                  example: 0
                extra:
                  type: string
                  description: Extra data (hex format)
                  example: "abc123..."
            example:
              destinations:
                - address: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                  amount: 500000
                - address: "PAS1abc..."
                  amount: 500000
              fee: 100
      responses:
        '200':
          description: Transaction sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactionHash:
                    type: string
                    example: "abc123..."
                  fee:
                    type: integer
                    example: 100
                  relayedToNetwork:
                    type: boolean
                    example: true
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/transactions/send/advanced \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "destinations": [
                  {"address": "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa", "amount": 500000},
                  {"address": "PAS1abc...", "amount": 500000}
                ],
                "fee": 100
              }'

  /transactions/prepare/advanced:
    post:
      tags:
        - Transactions
      summary: Prepare an advanced transaction
      description: |
        Creates an advanced transaction without sending it.
      operationId: prepareAdvancedTransaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - destinations
              properties:
                destinations:
                  type: array
                  items:
                    type: object
                    properties:
                      address:
                        type: string
                      amount:
                        type: integer
                fee:
                  type: integer
                sourceAddresses:
                  type: array
                  items:
                    type: string
                changeAddress:
                  type: string
                unlockTime:
                  type: integer
                extra:
                  type: string
            example:
              destinations:
                - address: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
                  amount: 500000
              fee: 100
      responses:
        '200':
          description: Transaction prepared successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactionHash:
                    type: string
                    example: "abc123..."
                  fee:
                    type: integer
                    example: 100
                  relayedToNetwork:
                    type: boolean
                    example: false
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/transactions/prepare/advanced \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "destinations": [
                  {"address": "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa", "amount": 500000}
                ],
                "fee": 100
              }'

  /transactions/send/prepared:
    post:
      tags:
        - Transactions
      summary: Send a prepared transaction
      description: |
        Sends a previously prepared transaction to the network.
      operationId: sendPreparedTransaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - transactionHash
              properties:
                transactionHash:
                  type: string
                  description: Hash of prepared transaction
                  example: "abc123..."
            example:
              transactionHash: "abc123..."
      responses:
        '200':
          description: Transaction sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X POST http://localhost:21002/transactions/send/prepared \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "transactionHash": "abc123..."
              }'

  /transactions/prepared/{hash}:
    delete:
      tags:
        - Transactions
      summary: Delete a prepared transaction
      description: |
        Deletes a previously prepared transaction.
      operationId: deletePreparedTransaction
      parameters:
        - name: hash
          in: path
          required: true
          schema:
            type: string
          description: Transaction hash
          example: "abc123..."
      responses:
        '200':
          description: Transaction deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X DELETE "http://localhost:21002/transactions/prepared/abc123..." \
              -H "X-API-KEY: your_rpc_password"

  /transactions:
    get:
      tags:
        - Transactions
      summary: Get all transactions
      description: |
        Returns all transactions in the wallet.
      operationId: getTransactions
      responses:
        '200':
          description: List of transactions
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/transactions \
              -H "X-API-KEY: your_rpc_password"

  /transactions/{height}:
    get:
      tags:
        - Transactions
      summary: Get transactions from height
      description: |
        Returns all transactions starting from a specific block height.
      operationId: getTransactionsFromHeight
      parameters:
        - name: height
          in: path
          required: true
          schema:
            type: integer
          description: Starting block height
          example: 100000
      responses:
        '200':
          description: List of transactions
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/transactions/100000 \
              -H "X-API-KEY: your_rpc_password"

  /transactions/{startHeight}/{endHeight}:
    get:
      tags:
        - Transactions
      summary: Get transactions in height range
      description: |
        Returns all transactions within a block height range.
      operationId: getTransactionsInRange
      parameters:
        - name: startHeight
          in: path
          required: true
          schema:
            type: integer
          description: Starting block height
          example: 100000
        - name: endHeight
          in: path
          required: true
          schema:
            type: integer
          description: Ending block height
          example: 101000
      responses:
        '200':
          description: List of transactions
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/transactions/100000/101000" \
              -H "X-API-KEY: your_rpc_password"

  /transactions/address/{address}/{height}:
    get:
      tags:
        - Transactions
      summary: Get transactions for address from height
      description: |
        Returns transactions for a specific address starting from a height.
      operationId: getAddressTransactionsFromHeight
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
          description: Address to filter by
          example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
        - name: height
          in: path
          required: true
          schema:
            type: integer
          description: Starting block height
          example: 100000
      responses:
        '200':
          description: List of transactions
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/transactions/address/PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa/100000" \
              -H "X-API-KEY: your_rpc_password"

  /transactions/address/{address}/{startHeight}/{endHeight}:
    get:
      tags:
        - Transactions
      summary: Get transactions for address in range
      description: |
        Returns transactions for an address within a block height range.
      operationId: getAddressTransactionsInRange
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
          example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
        - name: startHeight
          in: path
          required: true
          schema:
            type: integer
          example: 100000
        - name: endHeight
          in: path
          required: true
          schema:
            type: integer
          example: 101000
      responses:
        '200':
          description: List of transactions
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/transactions/address/PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa/100000/101000" \
              -H "X-API-KEY: your_rpc_password"

  /transactions/unconfirmed:
    get:
      tags:
        - Transactions
      summary: Get all unconfirmed transactions
      description: |
        Returns all unconfirmed/pending transactions.
      operationId: getUnconfirmedTransactions
      responses:
        '200':
          description: List of unconfirmed transactions
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/transactions/unconfirmed \
              -H "X-API-KEY: your_rpc_password"

  /transactions/unconfirmed/{address}:
    get:
      tags:
        - Transactions
      summary: Get unconfirmed transactions for address
      description: |
        Returns unconfirmed transactions for a specific address.
      operationId: getUnconfirmedTransactionsForAddress
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
          description: Address to filter by
          example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      responses:
        '200':
          description: List of unconfirmed transactions
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/transactions/unconfirmed/PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa" \
              -H "X-API-KEY: your_rpc_password"

  /transactions/hash/{hash}:
    get:
      tags:
        - Transactions
      summary: Get transaction by hash
      description: |
        Returns details of a specific transaction.
      operationId: getTransactionByHash
      parameters:
        - name: hash
          in: path
          required: true
          schema:
            type: string
          description: Transaction hash
          example: "abc123..."
      responses:
        '200':
          description: Transaction details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletTransaction'
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/transactions/hash/abc123..." \
              -H "X-API-KEY: your_rpc_password"

  /transactions/privatekey/{hash}:
    get:
      tags:
        - Transactions
      summary: Get transaction private key
      description: |
        Returns the private key for a transaction (for proving ownership).
      operationId: getTransactionPrivateKey
      parameters:
        - name: hash
          in: path
          required: true
          schema:
            type: string
          description: Transaction hash
          example: "abc123..."
      responses:
        '200':
          description: Transaction private key
          content:
            application/json:
              schema:
                type: object
                properties:
                  privateKey:
                    type: string
                    description: Transaction private key (hex)
                    example: "def456..."
      x-code-samples:
        - lang: "curl"
          source: |
            curl "http://localhost:21002/transactions/privatekey/abc123..." \
              -H "X-API-KEY: your_rpc_password"

  ################################################################################
  # NODE & STATUS
  ################################################################################

  /node:
    get:
      tags:
        - Node
      summary: Get connected node information
      description: |
        Returns information about the connected daemon node.
      operationId: getNodeInfo
      responses:
        '200':
          description: Node information
          content:
            application/json:
              schema:
                type: object
                properties:
                  daemonHost:
                    type: string
                    description: Daemon host address
                    example: "127.0.0.1"
                  daemonPort:
                    type: integer
                    description: Daemon RPC port
                    example: 21001
                  daemonSSL:
                    type: boolean
                    description: Whether SSL is enabled
                    example: false
                  nodeFee:
                    type: integer
                    description: Node fee amount (atomic units)
                    example: 1000
                  nodeAddress:
                    type: string
                    description: Node fee address
                    example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/node \
              -H "X-API-KEY: your_rpc_password"

    put:
      tags:
        - Node
      summary: Change connected node
      description: |
        Connects to a different daemon node.
      operationId: setNodeInfo
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - daemonHost
                - daemonPort
              properties:
                daemonHost:
                  type: string
                  description: New daemon host
                  example: "192.168.1.100"
                daemonPort:
                  type: integer
                  description: New daemon port
                  example: 21001
                daemonSSL:
                  type: boolean
                  description: Use SSL connection
                  default: false
            example:
              daemonHost: "192.168.1.100"
              daemonPort: 21001
              daemonSSL: false
      responses:
        '200':
          description: Node changed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "OK"
      x-code-samples:
        - lang: "curl"
          source: |
            curl -X PUT http://localhost:21002/node \
              -H "Content-Type: application/json" \
              -H "X-API-KEY: your_rpc_password" \
              -d '{
                "daemonHost": "192.168.1.100",
                "daemonPort": 21001
              }'

  /status:
    get:
      tags:
        - Status
      summary: Get wallet status
      description: |
        Returns wallet and network synchronization status.
      operationId: getStatus
      responses:
        '200':
          description: Wallet status
          content:
            application/json:
              schema:
                type: object
                properties:
                  walletBlockCount:
                    type: integer
                    description: Wallet synced block count
                    example: 500000
                  localDaemonBlockCount:
                    type: integer
                    description: Local daemon block count
                    example: 500001
                  networkBlockCount:
                    type: integer
                    description: Network block count
                    example: 500010
                  peerCount:
                    type: integer
                    description: Connected peer count
                    example: 8
                  hashrate:
                    type: integer
                    description: Network hashrate
                    example: 0
                  subWalletCount:
                    type: integer
                    description: Number of addresses in wallet
                    example: 3
      x-code-samples:
        - lang: "curl"
          source: |
            curl http://localhost:21002/status \
              -H "X-API-KEY: your_rpc_password"

  ################################################################################
  # SCHEMA DEFINITIONS
  ################################################################################

components:
  schemas:
    WalletTransaction:
      type: object
      description: Wallet transaction details
      properties:
        hash:
          type: string
          description: Transaction hash
          example: "abc123..."
        blockHeight:
          type: integer
          description: Block height containing transaction
          example: 100000
        timestamp:
          type: integer
          description: Transaction timestamp (Unix epoch)
          example: 1234567890
        isIncoming:
          type: boolean
          description: Whether transaction is incoming
          example: true
        amount:
          type: integer
          description: Transaction amount (atomic units, positive for incoming, negative for outgoing)
          example: 1000000
        fee:
          type: integer
          description: Transaction fee (atomic units)
          example: 100
        payments:
          type: array
          description: Transaction payments
          items:
            type: object
            properties:
              amount:
                type: integer
                example: 1000000
              fromAddress:
                type: string
                example: "PAS18z7m9DGbJFoVv6HiGoiwxNG5mLoniSEFWkguBKt59JSHPHjYaa"
              toAddress:
                type: string
                example: "PAS1abc..."
        unlockTime:
          type: integer
          description: Unix timestamp or block height when funds unlock
          example: 0
        paymentId:
          type: string
          description: Payment ID if present
          example: "abc123..."
        transferCount:
          type: integer
          description: Number of transfers in transaction
          example: 1
        extra:
          type: string
          description: Extra transaction data
          example: "abc123..."
